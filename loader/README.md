OS非依存ローダー
================

フロッピーディスクまたはハードディスクのパーティションの先頭に書き込み、
アプリケーションをロードして実行する役目を担うローダーです。

## 各プログラムの説明

### print_regs.s
ローダーを書き込む領域に書き込むことを想定していますが、ローダーではありません。  
プログラム起動時の各レジスタの値を表示するプログラムです。

### loader.s
旧ローダーです。あまり賢くありません。  
いろいろなパラメータが決め打ちされており、基本的なフロッピーディスク専用です。  
エラー時には`hlt`します。

#### 仕様
ディスクのルートからBOOT.BINをメモリの0000:0500にロードし、実行します。

- %ax, %si, %di, %bp, %ds, %es, %ssは0に初期化されます。
- %spは0xFFF0に初期化されます。
- %bxにoutputnumberサブルーチンのアドレスが入ります。
- %cxにsearchfileサブルーチンのアドレスが入ります。
- %dxにgetfiledataサブルーチンのアドレスが入ります。

#### エラーメッセージ
- err xx  
  実行失敗です。
  xxにディスクリード時にBIOSから返されたエラーコードの10進数表現が入ります。
  BOOT.BINが見つからない場合、xxは0になります。

### loader2.s
新ローダーです。  
FAT12専用ですが、ハードディスクでも利用できるはずです。  
エラー時にはキー入力待機後、`int $0x18`します。

#### 仕様
ディスクのルートからBOOT.BINをメモリの0000:0500にロードし、実行します。

- %ds, %es, %ssは0に初期化されます。
- %spは0xFFF0に初期化されます。
- %ax, %dlはローダーが呼び出された時の値がそのまま渡されます。

特に、loader.sで提供されていたサブルーチンのアドレスは提供されません。

#### エラーメッセージ
- 404  
  BOOT.BINが見つからないときに表示されます。
- 413  
  BOOT.BINのサイズが大きすぎるか、0バイトのときに表示されます。
- 500 xx  
  ディスクリード時にエラーが発生したときに表示されます。  
  xxにはBIOSから返されたエラーコードが入ります。
  これは、16進数の各桁について、0→A, 1→B, ... ,A→K, ... , F→Pというように
  アルファベットで置き換えた形で表現されます。
  例えば、エラーコード0x80は"IA"と表現されます。
